<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Loja Cacheia+ ‚Äî Feminina & Interativa</title>
<style>
:root{
  --bg:#fff0f5; --panel:#ffe4f0; --muted:#d1b0c5; --text: #000; --accent:#ffb6c1; --accent2:#ff69b4; --danger:#ff7b72;
  --mono: ui-monospace, SFMono-Regular, Helvetica, Monaco, Poppins, "Liberation Mono", "Courier New", monospace;
}
*{box-sizing:border-box;}
body{margin:0; font-family:var(--mono); background:var(--bg); color:var(--text);}
.wrap{max-width:1800px; margin:0 auto; padding:24px;} /* ajustado para 5 cards */
header{display:flex; align-items:center; gap:10px; margin-bottom:24px; position:relative;}
header .logo{width:50px; height:50px; border-radius:50%; background:linear-gradient(135deg,#ffb6c1,#ff69b4); display:grid; place-items:center; color:#fff; font-weight:200; font-size:22px;}
header h1{font-size:50px; margin:0;}
header small{opacity:.7; font-size:0.85em;}

/* Banner de marcas */
#brandBanner{
  display:flex; gap:10px; margin:50px 10px; flex-wrap:wrap;
}
#brandBanner button{
  padding:14px 60px; border:none; border-radius:12px; background:var(--accent2); color:#fff; cursor:pointer; font-weight:bold;
}
#brandBanner button:hover{opacity:0.9; transform:translateY(-2px);}

/* Bot√µes externos */
#backCatalog{
  position:absolute; left:-55px; top:10px; padding:8px 12px; border:none; border-radius:12px;
  background:var(--accent); color:#fff; cursor:pointer; display:none;
}
#backCatalog:hover{opacity:0.9; transform:translateY(-20px);}

#cartButton{
  position:absolute; right:0; top:50px; padding:8px 12px; border:none; border-radius:12px;
  background:var(--accent2); color:#fff; cursor:pointer; font-size:25px;
}
#cartButton:hover{opacity:0.9; transform:translateY(-2px);}

/* Search & Grid */
.search-bar{margin-bottom:30px; display:flex; gap:8px;}
.search-bar input{flex:1; padding:8px 20px; border-radius:12px; border:2px solid var(--muted); background:#fff0f5; color:var(--text);}
.search-bar button{padding:8px 14px; border:none; border-radius:12px; background:var(--accent2); color:#fff; cursor:pointer; font-weight:bold;}

/* >>> ALTERA√á√ÉO: 5 PRODUTOS POR FILEIRA EM TELAS LARGAS <<< */
.grid{display:grid; grid-template-columns:1fr; gap:14px;}
/* Ajuste responsivo: 2 colunas em tablet, 5 em telas maiores */
@media(min-width:600px){ .grid{grid-template-columns:repeat(2,1fr);} }
@media(min-width:900px){ .grid{grid-template-columns:repeat(5,1fr);} }

.card{background:var(--panel); border-radius:16px; padding:12px; display:flex; flex-direction:column; align-items:center; box-shadow:0 4px 12px rgba(0,0,0,0.08); transition:transform .2s;}
.card:hover{transform:translateY(-4px);}
.card img{width:100%; height:160px; object-fit:cover; border-radius:18px;}
.card-content{width:100%; text-align:center; margin-top:8px;}
.card-content h4{margin:0 0 6px 0; font-size:1.02em;}
.card-content .dim{opacity:.75; font-size:0.85em;}
.price-btn{margin-top:6px; background:var(--accent); color:#fff; border:none; border-radius:8px; font-size:0.8em; padding:6px 8px; cursor:pointer; opacity:0.95; transition:opacity .2s;}
.price-btn:hover{opacity:1;}

/* Produto individual */
#productView{display:none; margin-top:20px;}
#productView .main-image img{width:100%;max-height:400px;object-fit:contain;border-radius:16px;margin-bottom:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.product-images{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
.product-images img{width:80px;height:80px;object-fit:cover;border-radius:12px;cursor:pointer;border:2px solid transparent;transition:border .2s;}
.product-images img.selected{border-color:var(--accent2);}
h1#productName{margin:10px 0;font-size:1.6em;}
p#productDescription{font-size:1em;opacity:0.85;margin-bottom:10px;}
.price{font-size:2em;color:var(--accent2); font-weight:bold;margin:15px 0;}
.buttons{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap;}
button.add-cart{background:var(--accent2);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;}
button.add-cart:hover{transform:translateY(-2px);opacity:0.9;}
button.quick-buy{background:#fff;border:2px solid var(--accent2);color:var(--accent2);padding:10px 14px;border-radius:10px;cursor:pointer;}
button.quick-buy:hover{transform:translateY(-2px);opacity:0.9;}
.shipping{margin-top:20px;padding:15px;background:var(--bg);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.06);}
.shipping input{padding:8px;border-radius:8px;border:1px solid var(--muted);width:150px;margin-right:10px;}

/* Pop-up sacola */
#cartPopup {
  position: fixed;
  top: 20%;
  left: -350px;
  width: 300px;
  background: var(--panel);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  border-radius: 12px;
  padding: 16px;
  transition: left 0.3s ease;
  z-index: 1000;
  font-family: var(--mono);
}
#cartPopup.show { left: 20px; }
#cartPopup .popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}
#cartPopup .popup-header h4 { margin:0; font-size:1em; }
#cartPopup .popup-header button { background:none; border:none; font-size:1.2em; cursor:pointer; }
#cartPopup .popup-body { display:flex; gap:10px; margin-bottom:10px; flex-direction:column; max-height:300px; overflow:auto; }
#cartPopup .popup-body div{display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;}
#cartPopup .popup-actions button { width:100%; padding:8px; margin-bottom:5px; border:none; border-radius:8px; cursor:pointer; }
#cartPopup .popup-actions .continue { background:var(--accent); color:#fff; }
#cartPopup .popup-actions .checkout { background:var(--accent2); color:#fff; }

/* Responsividade extra */
@media(max-width:480px){
  .wrap{padding:12px;}
  .card img{height:140px;}
  .search-bar input{padding:8px 10px;}
  header h1{font-size:18px;}
}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <button id="backCatalog" onclick="voltarCatalogo()">‚Üê</button>
    <div class="logo">Ch</div>
    <h1>Cachos Divinos <small>‚Äî Enrolou, Brlhou!</small></h1>
    <button id="cartButton" onclick="abrirCarrinho()">üõíSacola</button>
  </header>

  <!-- Banner de marcas -->
  <div id="brandBanner">
    <button onclick="filtrarPorMarca('seda')">Seda</button>
    <button onclick="filtrarPorMarca('skala')">Skala</button>
    <button onclick="filtrarPorMarca('elseve')">Elseve</button>
    <button onclick="filtrarPorMarca('salon line')">Salon Line</button>
    <button onclick="filtrarPorMarca('kolene')">Kolene</button>
    <button onclick="filtrarPorMarca('novex')">Novex</button>
    <button onclick="filtrarPorMarca('lola')">Lola</button>
    <button onclick="filtrarPorMarca('pentes')">Pentes</button>
    <button onclick="filtrarPorMarca('acess√≥rios')">Acess√≥rios</button>
  </div>

  <!-- Vis√£o do produto individual -->
  <div id="productView">
    <button class="back-btn" onclick="voltarGrid()">‚Üê Voltar</button>
    <div class="main-image">
      <img id="mainImage" src="" alt="Produto">
    </div>
    <div class="product-images" id="thumbnails"></div>
    <h1 id="productName"></h1>
    <p id="productDescription"></p>
    <p class="price" id="productPrice"></p>
    <div class="buttons">
      <button class="add-cart">Adicionar √† sacola</button>
      <button class="quick-buy" onclick="compraRapida()">Compra r√°pida</button>
    </div>
    <div class="shipping">
      <label for="cep">Calcular frete (CEP):</label><br>
      <input type="text" id="cep" placeholder="Digite seu CEP">
      <button onclick="calcularFrete()">Calcular</button>
      <p id="freteResult"></p>
    </div>
  </div>

  <!-- Barra de busca -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Buscar produtos ou tags...">
    <button onclick="buscar()">Pesquisar</button>
  </div>

  <!-- Grid de produtos -->
  <div class="grid" id="productGrid"></div>
</div>

<!-- Pop-up sacola -->
<div id="cartPopup">
  <div class="popup-header">
    <h4>Sacola</h4>
    <button onclick="fecharPopup()">√ó</button>
  </div>
  <div class="popup-body" id="cartItems"></div>
  <div class="subtotal">Subtotal: R$ <span id="cartSubtotal">0.00</span></div>
  <div class="popup-actions">
    <button class="continue" onclick="fecharPopup()">Continuar comprando</button>
    <button class="checkout" onclick="finalizarCompra()">Finalizar compra</button>
  </div>
</div>

<script>
const catalogo = [
  {id:'P001', nome:'Kit Completo Defini√ß√£o Natural-Salon line', categoria:'Kit', preco:96.3, tags:['Salon line','sem-sulfato'], desc:'Descri√ß√£o completa do produto.', images:['123.png','123a.png']},
  {id:'P002', nome:'Kit √ìleos Tratamento-Salon line', categoria:'√ìleo', preco:49.9, tags:['Salon line'], desc:'Descri√ß√£o completa do produto.', images:['1234.png','1234a.png']},
  {id:'P003', nome:'Kit S.O.S Hidrata√ß√£o √ìleo de R√≠cino Shampoo e Condicionador Litr√£o Salon Line', categoria:'shampoo', preco:72.9, tags:['salon line'], desc:'Descri√ß√£o completa do produto.', images:['12345.png']},
  {id:'P004', nome:'Condicionador Novex', categoria:'condicionador', preco:68.0, tags:['Salon line'], desc:'Descri√ß√£o completa do produto.', images:['123456.png']},
  {id:'P005', nome:'M√°scara Elseve', categoria:'m√°scara', preco:55.0, tags:['elseve'], desc:'Descri√ß√£o completa do produto.', images:['1234567.png']},
  {id:'P006', nome:'Creme Kolene', categoria:'creme', preco:60.0, tags:['salon line'], desc:'Descri√ß√£o completa do produto.', images:['12345678.png']},
  {id:'P007', nome:'Creme para Pentear Seda Cachos Definidos e Hidratados', categoria:'creme', preco:10.0, tags:['Seda'], desc:'Descri√ß√£o completa do produto.', images:['123456789.png','123456789a.png']},
  /* voc√™ pode adicionar mais produtos aqui para ver a grade preenchida */
];

let cart = [];
let currentProduct = null;
let currentQty = 1;

// Renderiza produtos no grid
function renderProdutos(lista){
  const grid = document.getElementById('productGrid');
  grid.innerHTML='';
  lista.forEach(p=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <img src="${p.images[0]}" alt="${p.nome}">
      <div class="card-content">
        <h4>${p.nome}</h4>
        <div class="dim">${p.categoria}</div>
        <button class="price-btn" onclick="verProduto('${p.id}')">Ver pre√ßo</button>
      </div>
    `;
    grid.appendChild(card);
  });
  document.getElementById('backCatalog').style.display='none';
  // Mostrar grid caso esteja oculto (ex.: depois de ver produto)
  document.getElementById('productGrid').style.display = 'grid';
}

// Filtrar por marca (aceita tags como string ou array)
function filtrarPorMarca(marca) {
  console.log("Marca clicada:", marca);

  const resultados = catalogo.filter(p => {
    if (!p.tags) return false; // se n√£o existir tags, ignora

    if (Array.isArray(p.tags)) {
      // se for array, verifica se algum item bate
      return p.tags.some(t => t.toLowerCase().trim() === marca.toLowerCase().trim());
    } else if (typeof p.tags === "string") {
      // se for string simples
      return p.tags.toLowerCase().trim() === marca.toLowerCase().trim();
    }
    return false;
  });

  console.log("Resultados encontrados:", resultados);

  renderProdutos(resultados);
  document.getElementById('backCatalog').style.display = 'inline-block';
}

// Voltar para cat√°logo geral
function voltarCatalogo(){
  renderProdutos(catalogo);
  document.getElementById('backCatalog').style.display='none';
}

// Ver produto individual
function verProduto(id){
  const produto = catalogo.find(p => p.id===id);
  if(!produto) return;
  currentProduct = produto;
  currentQty = 1;

  document.getElementById('productGrid').style.display='none';
  document.getElementById('productView').style.display='block';
  document.getElementById('productName').textContent = produto.nome;
  document.getElementById('productDescription').textContent = produto.desc;
  document.getElementById('productPrice').textContent = `R$ ${produto.preco.toFixed(2)}`;
  document.getElementById('mainImage').src = produto.images[0];

  const thumbnails = document.getElementById('thumbnails');
  thumbnails.innerHTML='';
  produto.images.forEach((imgSrc,index)=>{
    const img = document.createElement('img');
    img.src = imgSrc;
    if(index===0) img.classList.add('selected');
    img.addEventListener('click',()=>{
      document.getElementById('mainImage').src = imgSrc;
      document.querySelectorAll('.product-images img').forEach(i=>i.classList.remove('selected'));
      img.classList.add('selected');
    });
    thumbnails.appendChild(img);
  });
}

// Voltar para grid do cat√°logo
function voltarGrid(){
  document.getElementById('productView').style.display='none';
  document.getElementById('productGrid').style.display='grid';
  document.getElementById('cep').value='';
  document.getElementById('freteResult').textContent='';
}

// Calcular frete
function calcularFrete(){
  const cep = document.getElementById('cep').value;
  if(cep.length>=8) document.getElementById('freteResult').textContent = "Frete: R$ 12,90 (3-5 dias √∫teis)";
  else document.getElementById('freteResult').textContent = "Digite um CEP v√°lido.";
}

// Carrinho
function abrirCarrinho(){
  const cartContainer = document.getElementById('cartItems');
  cartContainer.innerHTML='';
  let subtotal = 0;
  cart.forEach(item=>{
    const div = document.createElement('div');
    div.innerHTML = `<span>${item.nome} x ${item.qtd}</span> <span>R$ ${(item.preco*item.qtd).toFixed(2)}</span>`;
    cartContainer.appendChild(div);
    subtotal += item.preco*item.qtd;
  });
  document.getElementById('cartSubtotal').textContent = subtotal.toFixed(2);
  document.getElementById('cartPopup').classList.add('show');
}

function fecharPopup(){
  document.getElementById('cartPopup').classList.remove('show');
}

// Adicionar ao carrinho
document.addEventListener('click', (e) => {
  // delega√ß√£o: detecta clique no bot√£o add-cart dentro da view do produto
  if(e.target && e.target.classList && e.target.classList.contains('add-cart')){
    const produto = currentProduct;
    if(!produto) return;
    const existing = cart.find(p=>p.id===produto.id);
    if(existing) existing.qtd += currentQty;
    else cart.push({...produto,qtd:currentQty});
    abrirCarrinho();
  }
});

// Finalizar compra
function finalizarCompra(){
  alert(`Compra finalizada!\nTotal: R$ ${cart.reduce((acc,i)=>acc+i.preco*i.qtd,0).toFixed(2)}`);
  cart = [];
  fecharPopup();
}

// Compra r√°pida
function compraRapida(){
  const produtoNome = document.getElementById('productName').textContent;
  const preco = document.getElementById('productPrice').textContent;
  const numero = "5511999999999";
  const mensagem = `Ol√°! Quero comprar o produto: ${produtoNome} pelo pre√ßo de ${preco}.`;
  window.open(`https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`, '_blank');
}

// Buscar
function buscar(){
  const termo = document.getElementById('searchInput').value.toLowerCase();
  const resultados = catalogo.filter(p=>{
    const tagsText = Array.isArray(p.tags) ? p.tags.join(' ') : (p.tags || '');
    return (p.nome && p.nome.toLowerCase().includes(termo)) || (tagsText.toLowerCase().includes(termo));
  });
  if(resultados.length===0) alert('Nenhum produto encontrado.');
  else renderProdutos(resultados);
}

// Inicializa grid
renderProdutos(catalogo);
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Loja Cacheia+ ‚Äî Feminina & Interativa</title>
<style>
  .taskbar {
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--panel);
    border-radius: 12px;
    padding: 10px 16px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }

  .taskbar .categories {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }

  .taskbar .categories button {
    background: none;
    border: none;
    cursor: pointer;
    font-weight: bold;
    color: var(--accent2);
    font-size: 0.95em;
    transition: color 0.2s;
  }

  .taskbar .categories button:hover {
    color: var(--danger);
  }

  .taskbar .cart-icon {
    background: var(--accent2);
    color: white;
    border: none;
    border-radius: 50%;
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 20px;
    transition: background 0.3s;
  }

  .taskbar .cart-icon:hover {
    background: var(--accent);
  }

  :root {
    --bg:#fff0f5; --panel:#ffe4f0; --muted:#d1b0c5; --text: #000; --accent:#ffb6c1; --accent2:#ff69b4; --danger:#ff7b72;
    --mono: ui-monospace, SFMono-Regular, Helvetica, Monaco, Poppins, "Liberation Mono", "Courier New", monospace;
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: var(--mono);
    background: var(--bg);
    color: var(--text);
  }
  .wrap {
    max-width: 750px;
    margin: 0 auto;
    padding: 24px;
  }
  header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 24px;
  }
  header .logo {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg,#ffb6c1,#ff69b4);
    display: grid;
    place-items: center;
    color: #fff;
    font-weight: 200;
    font-size: 22px;
  }
  header h1 {
    font-size: 24px;
    margin: 0;
  }
  header small {
    opacity: .7;
    font-size: 0.85em;
  }
  .search-bar {
    margin-bottom: 30px;
    display: flex;
    gap: 8px;
  }
  .search-bar input {
    flex: 1;
    padding: 8px 20px;
    border-radius: 12px;
    border: 2px solid var(--muted);
    background: #fff0f5;
    color: var(--text);
  }
  .search-bar button {
    padding: 8px 14px;
    border: none;
    border-radius: 12px;
    background: var(--accent2);
    color: #fff;
    cursor: pointer;
    font-weight: bold;
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 14px;
  }
  @media(min-width: 680px) {
    .grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  .card {
    background: var(--panel);
    border-radius: 16px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform .2s;
  }
  .card:hover {
    transform: translateY(-4px);
  }
  .card img {
    width: 100%;
    height: 190px;
    object-fit: cover;
    border-radius: 25px;
  }
  .card-content {
    width: 100%;
    text-align: center;
    margin-top: 8px;
  }
  .card-content h4 {
    margin: 0 0 6px 0;
    font-size: 1.05em;
  }
  .card-content .dim {
    opacity: .75;
    font-size: 0.85em;
  }
  .price-btn {
    margin-top: 6px;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 0.8em;
    padding: 4px 8px;
    cursor: pointer;
    opacity: 0.85;
    transition: opacity .2s;
  }
  .price-btn:hover {
    opacity: 1;
  }

  /* Bot√£o Voltar */
  .back-btn {
    display: block;
    margin-bottom: 10px;
    background: var(--accent);
    color: #fff;
    padding: 8px 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
  }
  .back-btn:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }

  /* Produto individual */
  #productView {
    display: none;
    margin-top: 20px;
  }
  #productView .main-image img {
    width: 100%;
    max-height: 400px;
    object-fit: contain;
    border-radius: 16px;
    margin-bottom: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .product-images {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  .product-images img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 12px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: border .2s;
  }
  .product-images img.selected {
    border-color: var(--accent2);
  }
  h1#productName {
    margin: 10px 0;
    font-size: 1.6em;
  }
  p#productDescription {
    font-size: 1em;
    opacity: 0.85;
    margin-bottom: 10px;
  }
  .price {
    font-size: 2em;
    color: var(--accent2);
    font-weight: bold;
    margin: 15px 0;
  }
  .buttons {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
  }
  button.add-cart {
    background: var(--accent2);
    color: #fff;
  }
  button.add-cart:hover {
    transform: translateY(-2px);
    opacity: 0.9;
  }
  button.quick-buy {
    background: #fff;
    border: 2px solid var(--accent2);
    color: var(--accent2);
  }
  button.quick-buy:hover {
    transform: translateY(-2px);
    opacity: 0.9;
  }
  .shipping {
    margin-top: 20px;
    padding: 15px;
    background: var(--bg);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
  }
  .shipping input {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid var(--muted);
    width: 150px;
    margin-right: 10px;
  }

  /* Pop-up sacola */
  #cartPopup {
    position: fixed;
    top: 20%;
    left: -350px;
    width: 300px;
    background: var(--panel);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    border-radius: 12px;
    padding: 16px;
    transition: left 0.3s ease;
    z-index: 1000;
    font-family: var(--mono);
  }
  #cartPopup.show {
    left: 20px;
  }
  #cartPopup .popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  #cartPopup .popup-header h4 {
    margin: 0;
    font-size: 1em;
  }
  #cartPopup .popup-header button {
    background: none;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
  }
  #cartPopup ul {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 300px;
    overflow-y: auto;
  }
  #cartPopup ul li {
    border-bottom: 1px solid var(--muted);
    padding: 8px 0;
    font-size: 0.9em;
  }

  /* Cabe√ßalho do cat√°logo */
  #header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    max-width: 700px;
    width: 100%;
  }
  #header h1 {
    margin: 0;
    font-size: 1.5em;
    flex-grow: 1;
  }
  #extraBackBtn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    display: none;
  }
  #extraBackBtn svg {
    stroke: #ff6f61;
    stroke-width: 3;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

</style>
</head>
<body>
<div class="wrap">

  <header>
    <div class="logo" aria-label="Logo Cacheia+">CP</div>
    <div>
      <h1>Loja Cacheia+</h1>
      <small>Feminina & Interativa</small>
    </div>
  </header>

  <!-- Taskbar -->
  <nav class="taskbar" aria-label="Categorias">
    <div class="categories">
      <button onclick="filtrarCategoria('Cachos')">Cachos</button>
      <button onclick="filtrarCategoria('Alisados')">Alisados</button>
      <button onclick="filtrarCategoria('Misturados')">Misturados</button>
    </div>
    <button class="cart-icon" aria-label="Abrir sacola" title="Abrir sacola" onclick="toggleCartPopup()">
      üõí
    </button>
  </nav>

  <!-- Cabe√ßalho cat√°logo + seta extra -->
  <div id="header" role="banner">
    <h1>Cat√°logo de Produtos</h1>
    <button id="extraBackBtn" aria-label="Voltar ao cat√°logo geral" title="Voltar ao cat√°logo geral" onclick="voltarParaCatalogo()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>
  </div>

  <!-- Busca -->
  <div class="search-bar" role="search">
    <input type="search" id="searchInput" placeholder="Buscar produto..." aria-label="Buscar produto" oninput="buscaProduto()" />
    <button onclick="buscaProduto()">Buscar</button>
  </div>

  <!-- Grid de produtos -->
  <div id="catalogo" class="grid" role="list" aria-live="polite"></div>

  <!-- Produto individual -->
  <section id="productView" aria-live="polite">
    <button class="back-btn" onclick="voltarParaCatalogo()">‚Üê Voltar</button>
    <div class="main-image"><img src="" alt="" id="mainImage"/></div>
    <div class="product-images" id="productImages"></div>
    <h1 id="productName"></h1>
    <p id="productDescription"></p>
    <div class="price" id="productPrice"></div>
    <div class="buttons">
      <button class="add-cart" onclick="adicionarSacola()">Adicionar √† sacola</button>
      <button class="quick-buy" onclick="comprarAgora()">Comprar agora</button>
    </div>

    <div class="shipping" role="region" aria-label="Consulta de frete">
      <input type="text" id="cepInput" placeholder="Digite seu CEP" aria-label="CEP para c√°lculo do frete"/>
      <button onclick="consultarFrete()">Calcular Frete</button>
      <p id="freteResult"></p>
    </div>
  </section>

  <!-- Pop-up Sacola -->
  <aside id="cartPopup" role="dialog" aria-modal="true" aria-label="Sacola de compras">
    <div class="popup-header">
      <h4>Sacola</h4>
      <button onclick="toggleCartPopup()" aria-label="Fechar sacola">√ó</button>
    </div>
    <ul id="cartList"></ul>
  </aside>

</div>

<script>
  const catalogo = [
    {
      id: 1,
      nome: "Shampoo para Cachos",
      descricao: "Shampoo especial para cabelos cacheados, hidrata√ß√£o intensa.",
      preco: 35.90,
      tags: ["Cachos"],
      imagens: [
        "https://images.unsplash.com/photo-1600185367077-6a2d9a0c3a8f?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?auto=format&fit=crop&w=600&q=80"
      ]
    },
    {
      id: 2,
      nome: "Creme Alisante",
      descricao: "Creme para alisar cabelos, efeito duradouro e brilho.",
      preco: 45.50,
      tags: ["Alisados"],
      imagens: [
        "https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1600185367077-6a2d9a0c3a8f?auto=format&fit=crop&w=600&q=80"
      ]
    },
    {
      id: 3,
      nome: "M√°scara Misturada",
      descricao: "M√°scara para cabelos misturados, cuidado completo.",
      preco: 39.00,
      tags: ["Misturados"],
      imagens: [
        "https://images.unsplash.com/photo-1536305033309-b2fc77648559?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80"
      ]
    },
    {
      id: 4,
      nome: "Condicionador para Cachos",
      descricao: "Condicionador nutritivo para cabelos cacheados.",
      preco: 29.90,
      tags: ["Cachos"],
      imagens: [
        "https://images.unsplash.com/photo-1515377905703-c4788e51af15?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80"
      ]
    },
    {
      id: 5,
      nome: "M√°scara Alisadora",
      descricao: "M√°scara hidratante para cabelos alisados.",
      preco: 49.90,
      tags: ["Alisados"],
      imagens: [
        "https://images.unsplash.com/photo-1515377905703-c4788e51af15?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1536305033309-b2fc77648559?auto=format&fit=crop&w=600&q=80"
      ]
    },
    {
      id: 6,
      nome: "Creme para Misturados",
      descricao: "Creme para cabelos misturados, defini√ß√£o e brilho.",
      preco: 37.80,
      tags: ["Misturados"],
      imagens: [
        "https://images.unsplash.com/photo-1600185367077-6a2d9a0c3a8f?auto=format&fit=crop&w=600&q=80",
        "https://images.unsplash.com/photo-1515377905703-c4788e51af15?auto=format&fit=crop&w=600&q=80"
      ]
    }
  ];

  let sacola = [];
  let produtoSelecionado = null;

  const catalogoDiv = document.getElementById('catalogo');
  const productView = document.getElementById('productView');
  const mainImage = document.getElementById('mainImage');
  const productImagesDiv = document.getElementById('productImages');
  const productName = document.getElementById('productName');
  const productDescription = document.getElementById('productDescription');
  const productPrice = document.getElementById('productPrice');
  const freteResult = document.getElementById('freteResult');
  const cepInput = document.getElementById('cepInput');
  const searchInput = document.getElementById('searchInput');
  const extraBackBtn = document.getElementById('extraBackBtn');
  const cartPopup = document.getElementById('cartPopup');
  const cartList = document.getElementById('cartList');

  function renderProdutos(produtos) {
    catalogoDiv.innerHTML = '';
    productView.style.display = 'none';
    catalogoDiv.style.display = 'grid';

    if (produtos.length === 0) {
      catalogoDiv.innerHTML = '<p>Nenhum produto encontrado.</p>';
      return;
    }

    produtos.forEach(produto => {
      const card = document.createElement('div');
      card.className = 'card';
      card.setAttribute('role', 'listitem');
      card.innerHTML = `
        <img src="${produto.imagens[0]}" alt="${produto.nome}">
        <div class="card-content">
          <h4>${produto.nome}</h4>
          <p class="dim">${produto.descricao}</p>
          <button class="price-btn" aria-label="Ver detalhes do produto ${produto.nome}" onclick="mostrarProduto(${produto.id})">
            R$ ${produto.preco.toFixed(2)}
          </button>
        </div>
      `;
      catalogoDiv.appendChild(card);
    });
  }

  function mostrarProduto(id) {
    produtoSelecionado = catalogo.find(p => p.id === id);
    if (!produtoSelecionado) return;

    mainImage.src = produtoSelecionado.imagens[0];
    mainImage.alt = produtoSelecionado.nome;
    productImagesDiv.innerHTML = '';
    produtoSelecionado.imagens.forEach((img, i) => {
      const thumb = document.createElement('img');
      thumb.src = img;
      thumb.alt = produtoSelecionado.nome + ' - imagem ' + (i + 1);
      if(i === 0) thumb.classList.add('selected');
      thumb.onclick = () => {
        mainImage.src = img;
        productImagesDiv.querySelectorAll('img').forEach(im => im.classList.remove('selected'));
        thumb.classList.add('selected');
      }
      productImagesDiv.appendChild(thumb);
    });

    productName.textContent = produtoSelecionado.nome;
    productDescription.textContent = produtoSelecionado.descricao;
    productPrice.textContent = `R$ ${produtoSelecionado.preco.toFixed(2)}`;

    catalogoDiv.style.display = 'none';
    productView.style.display = 'block';
    freteResult.textContent = '';
    cepInput.value = '';

    // Oculta a seta extra quando mostrando produto
    extraBackBtn.style.display = 'none';
  }

  function voltarParaCatalogo() {
    produtoSelecionado = null;
    renderProdutos(catalogo);
    searchInput.value = '';
    freteResult.textContent = '';
    cepInput.value = '';
    // Esconde a seta extra
    extraBackBtn.style.display = 'none';
  }

  function filtrarCategoria(categoria) {
    const filtrados = catalogo.filter(prod => 
      prod.tags.some(tag => tag.toLowerCase() === categoria.toLowerCase())
    );
    renderProdutos(filtrados);
    limparBuscaEFrete();
    // Mostra a seta extra para voltar
    extraBackBtn.style.display = 'inline-flex';
  }

  function limparBuscaEFrete() {
    searchInput.value = '';
    freteResult.textContent = '';
    cepInput.value = '';
  }

  function buscaProduto() {
    const termo = searchInput.value.trim().toLowerCase();
    if (!termo) {
      voltarParaCatalogo();
      return;
    }
    const encontrados = catalogo.filter(p => p.nome.toLowerCase().includes(termo) || p.descricao.toLowerCase().includes(termo));
    renderProdutos(encontrados);
    // Oculta seta extra na busca
    extraBackBtn.style.display = 'none';
  }

  function adicionarSacola() {
    if (!produtoSelecionado) return;
    sacola.push(produtoSelecionado);
    alert(`Produto "${produtoSelecionado.nome}" adicionado √† sacola!`);
    atualizarSacola();
  }

  function comprarAgora() {
    if (!produtoSelecionado) return;
    alert(`Voc√™ comprou: ${produtoSelecionado.nome} por R$ ${produtoSelecionado.preco.toFixed(2)}!`);
  }

  function consultarFrete() {
    const cep = cepInput.value.trim();
    if (!cep) {
      alert('Por favor, digite um CEP v√°lido.');
      return;
    }
    // Simula√ß√£o b√°sica
    let precoFrete = (Math.random() * 20 + 10).toFixed(2);
    freteResult.textContent = `Frete estimado para o CEP ${cep}: R$ ${precoFrete}`;
  }

  function toggleCartPopup() {
    cartPopup.classList.toggle('show');
    atualizarSacola();
  }

  function atualizarSacola() {
    cartList.innerHTML = '';
    if (sacola.length === 0) {
      cartList.innerHTML = '<li>Sacola vazia.</li>';
      return;
    }
    sacola.forEach((item, idx) => {
      const li = document.createElement('li');
      li.textContent = `${item.nome} - R$ ${item.preco.toFixed(2)}`;
      cartList.appendChild(li);
    });
  }

  // Inicializa a p√°gina mostrando todos produtos
  renderProdutos(catalogo);
</script>

</body>
</html>
